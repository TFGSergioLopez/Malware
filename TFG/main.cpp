#include <SFML/Graphics.hpp>
#include <iostream>
#include <chrono>

#ifdef _WIN32
#include <windows.h>
#endif

/*

int main() {
    sf::RenderWindow window(sf::VideoMode(500, 300), "Instalador Simulado", sf::Style::Titlebar | sf::Style::Close);
    sf::RectangleShape progressBar;
    progressBar.setSize(sf::Vector2f(0, 30));
    progressBar.setFillColor(sf::Color::Green);
    progressBar.setPosition(50, 200);

    sf::RectangleShape nextButton;
    nextButton.setSize(sf::Vector2f(100, 40));
    nextButton.setFillColor(sf::Color::White);
    nextButton.setPosition(300, 250);

    sf::RectangleShape cancelButton;
    cancelButton.setSize(sf::Vector2f(100, 40));
    cancelButton.setFillColor(sf::Color::White);
    cancelButton.setPosition(100, 250);

    float progress = 0.0f;
    bool errorOccurred = false;

    // Registrar el tiempo de inicio
    auto startTime = std::chrono::steady_clock::now();

    while (window.isOpen()) {
        sf::Event event;
        while (window.pollEvent(event)) {
            if (event.type == sf::Event::Closed) {
                window.close();
            }
        }

        auto currentTime = std::chrono::steady_clock::now();
        auto elapsedTime = std::chrono::duration_cast<std::chrono::seconds>(currentTime - startTime);

        // Comprobar si han pasado 3 segundos
        if (elapsedTime.count() >= 3 && !errorOccurred) {
            errorOccurred = true;
            progressBar.setFillColor(sf::Color::Red);

            // Mostrar el mensaje de error y cerrar la aplicación
#ifdef _WIN32
            MessageBoxA(NULL, "Se necesita instalar DirectX 11 para continuar.", "Error", MB_ICONERROR | MB_OK);
#endif

            window.close();
        }

        if (!errorOccurred) {
            progress += 0.5f;
            progressBar.setSize(sf::Vector2f(progress, 30));
            if (progress >= 400.0f) {
                progress = 0.0f;
            }
        }

        window.clear(sf::Color(220, 220, 220)); // Color de fondo gris claro
        window.draw(progressBar);
        window.draw(nextButton);
        window.draw(cancelButton);
        window.display();

        sf::sleep(sf::milliseconds(100));
    }

    return 0;
}*/
